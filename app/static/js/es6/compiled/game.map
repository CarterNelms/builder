{"version":3,"file":"game.js","sources":["/home/carter/Documents/Code/builder/app/static/js/es6/game.es6.js"],"names":[],"mappings":"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","sourcesContent":["/* jshint unused: false */\n$(function()\n{\n  'use strict';\n  \n  var $forest = $('#forest');\n  var user;\n\n  $('#login').click(login);\n  $('#seed').click(seed);\n  $('#getForest').click(getForest);\n  $forest.on('click', '.treeWrap:not(.dead)', action);\n  $('#sell').click(sell);\n\n  function sell(e)\n  {\n    var data = $(this).closest('form').serialize();\n    data += `&userId=${$('#username').data('id')}`;\n    \n    $.ajax(\n    {\n      url: '/sell',\n      type: 'PUT',\n      data: data,\n      success: r=>\n      {\n        $('#wood > span').text(r.wood.toString());\n        $('#money > span').text(r.cash.toFixed(2));\n      }\n    });  \n\n    e.preventDefault();\n  }\n\n  function action()\n  {\n    var $thisTree = $(this);\n    var treeId = $thisTree.data('id');\n\n    // if($thisTree.hasClass('dead'))\n    // {\n    //   chop();\n    // }\n    // else\n    // {\n    var userAction = $('input[name=action]:checked').val();\n    switch(userAction)\n    {\n      case 'grow':\n        grow();\n        break;\n      case 'chop':\n        var $plant = $thisTree.children('.tree');\n        if($plant.hasClass('adult') && !$plant.hasClass('stump'))\n        {\n          chop();\n        }\n        break;\n    }\n    // }\n\n    function grow()\n    {\n      $.ajax(\n      {\n        url: `/tree/${treeId}/grow`,\n        type: 'PUT',\n        dataType: 'html',\n        success: tree=>\n        {\n          $thisTree.replaceWith(tree);\n        }\n      });\n    }\n\n    function chop()\n    {\n      $.ajax(\n      {\n        url: `/tree/${treeId}/chop`,\n        type: 'PUT',\n        success: r=>\n        {\n          // if(r.canChop)\n          // {\n          $('#wood > span').text(r.wood.toString());\n          $thisTree.replaceWith(r.tree);\n          $thisTree.children('.tree').addClass('stump');\n          // $thisTree.remove();\n          // }\n          // else\n          // {\n          //   alert('Tree is too young to chop');\n          // }\n        }\n      });      \n    }\n  }\n\n  function getForest()\n  {\n    var userId = $('#username').data('id');\n\n    $.ajax(\n    {\n      url: `/forest/${userId}`,\n      type: 'GET',\n      dataType: 'html',\n      success: trees=>\n      {\n        $forest.text('');\n        $forest.append(trees);\n      }\n    });\n  }\n\n  function seed()\n  {\n    var userId = $('#username').data('id');\n\n    $.ajax(\n    {\n      url: '/seed',\n      type: 'POST',\n      data: {userId: userId},\n      dataType: 'html',\n      success: tree=>\n      {\n        $forest.append(tree);\n      }\n    });\n  }\n\n  function login(e)\n  {\n    var data = $(this).closest('form').serialize();\n\n    $.ajax(\n    {\n      url: '/login',\n      type: 'POST',\n      data: data,\n      success: r=>\n      {\n        $('#login').prev().val('');\n        $('#username').attr('data-id', r._id);\n        $('#username').text(r.username);\n        $('#wood > span').text(r.wood.toString());\n        $('#money > span').text(r.cash.toFixed(2));\n      }\n    });\n\n    e.preventDefault();\n  }\n});"]}